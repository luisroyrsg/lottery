!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=2)}([,,function(t,e,i){t.exports=i(3)},function(t,e){function i(t,e){for(var i=0,n=$(".lottery li").length,r=1;r<=n;r++){for(var a=$(".clone").clone().removeClass("clone"),l=0,c=0,o="",d=0;d<t.length;d++){var s=t[d].split(",");if(s[0]==r){if(0==l)l=1,a.css("display","block"),a.attr("id",e+"item-"+r),a.find(".table_title .title").first().text($(".lottery li[id="+r+"]").text()+" : "),$(".ticket-detail").append(a),0==c&&(o+="<tr>"),3==++c&&(o+="</tr><tr>",c=1),o+="<td>"+s[2]+"</td>",o+="<td>"+s[3]+"</td>",$("#"+e+"item-"+r+" .price").text(s[3]);else{0==c&&(o+="<tr>"),3==++c&&(o+="</tr><tr>",c=1),o+="<td>"+s[2]+"</td>",o+="<td>"+s[3]+"</td>";var p=Number($("#"+e+"item-"+r+" .price").first().text())+Number(s[3]);$("#"+e+"item-"+r+" .price").text(p)}i=Number(i)+Number(s[3])}}1==l&&(o+="</tr>",$("#"+e+"item-"+r+" tbody").append(o))}$(".total_display span").text(i.toFixed(2))}$(document).ready(function(){$(".ticket_mark_result").addClass("display-none"),$(".ticket_print").click(function(){var t=$(this).parent().parent().find(".ticket_id").attr("id");t&&$.ajax({url:"/delete-ticket",data:{ticket_id:t,copy:1},type:"get",success:function(t){$("#ticket_result .ticket-detail").empty();var e=t.pop(),n=t.pop(),r="001 - "+t.pop()+" - "+n;$("#ticket_result h1.origin").html("**&nbsp;&nbsp; COPIED &nbsp;&nbsp;**"),$("#ticket_result .logo-text p").text(e),$("#ticket_result .fecha span").text(e),$("#ticket_result .print-container div.ticket-info p:first").text(r),$("#ticket_result .print-container div.ticket-info h3").empty(),i(t,"cancel"),printJS({printable:"ticket_result",type:"html",targetStyles:["*"],documentTitle:"Vender tickets"})}})}),$(".ticket_delete").click(function(){var t=$(this).parent().parent().find(".ticket_id").attr("id");$(this).parent().parent().remove(),t&&$.ajax({url:"/delete-ticket",data:{ticket_id:t},type:"get",success:function(e){$("#ticket_cancel .ticket-detail").empty();var n=e.pop(),r=e.pop(),a=e.pop(),l=e.pop(),c="001 - "+a+" - "+t;$("#ticket_cancel .print-container div.ticket-info h3").text(l),$("#ticket_cancel .print-container div.ticket-info p:first").text(c),$(".balance span").text(r),$("#ticket_cancel .logo-text p").text(n),$("#ticket_cancel .fecha span").text(n),i(e,"cancel"),printJS({printable:"ticket_cancel",type:"html",targetStyles:["*"],documentTitle:"Vender tickets"})}})}),$(".ticket_paid").click(function(){$("#mark_modal").modal({backdrop:"static"})}),$("#mark_modal").on("hidden.bs.modal",function(){location.reload()}),$(".mark_submit").click(function(){var t,e=$("#code").val(),i=$("#temp_barcode").val();if(!e)return $("#code-require-error").addClass("display-show"),!1;t=e==i?{code:e,is_paid:1}:{code:e},$.ajax({url:"ticket-mark",data:t,type:"get",success:function(t){if(console.log(t),"no"==t)$(".error").removeClass("display-show"),$("#code-invalid-error").addClass("display-show");else if("ok"==t)swal({title:"Success",text:"Successful paid.",icon:"success",button:"OK"}).then(function(){location.reload()});else if("already"==t)alert("The ticket is not a winning ticket or has already been paid.");else{$("#temp_barcode").val(t.bar_code),$(".mark_result").empty();var e=0,i=0,n=0;$(".ticket_mark_result").removeClass("display-none");var r=$(".name").text();r=r+"-"+t.id,$(".ticket_mark_result h5 span").text(r),t.details.forEach(function(t){e+=t.amount,1==t.is_win&&(i+=Number(t.prize))}),$(".ticket_mark_result .amount").text(e),1==t.is_pending&&$(".ticket_mark_result .pending_payment").text(i),2==t.is_pending&&(n=1);var a=$(".lottery li").length,l=t.details;console.log(l.length);for(var c=1;c<=a;c++){for(var o=0,d="",s=0;s<l.length;s++)l[s].lottery_id==c&&(0==o?(o=1,d+="<tr><td colspan='5'>"+$(".lottery li[id="+c+"]").text()+"</td></tr>",1==l[s].is_win&&(d+='<tr class="winning-play">'),0==l[s].is_win&&(d+='<tr class="losing-play">'),d+="<td>"+l[s].number+"</td>",d+="<td>"+$(".game li[id="+l[s].game_id+"]").text()+"</td>",d+="<td>"+l[s].amount+"</td>",d+="<td>"+l[s].prize+"</td>",n&&1==l[s].is_win?d+='<td style="color:blue;">paid</td>':n||1!=l[s].is_win?d+="<td></td>":d+='<td style="color:red;">pending</td>',d+="</tr>"):(1==l[s].is_win&&(d+='<tr class="winning-play">'),0==l[s].is_win&&(d+='<tr class="losing-play">'),d+="<td>"+l[s].number+"</td>",d+="<td>"+$(".game li[id="+l[s].game_id+"]").text()+"</td>",d+="<td>"+l[s].amount+"</td>",d+="<td>"+l[s].prize+"</td>",n&&1==l[s].is_win?d+='<td style="color:blue;">paid</td>':n||1!=l[s].is_win?d+="<td></td>":d+='<td style="color:red;">pending</td>',d+="</tr>"));$(".mark_result").append(d)}}}})})})}]);